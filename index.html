<!DOCTYPE html>
<!--

ETH NEW YORK HACKATHON

COLLUSION

IN CONTRACTS WE TRUST










































































-->

<html lang="en">

<head>
  <title>Collusion</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="keywords" content="ethereum, game, collusion">
<meta name="description" content="Collusion is an Ethereum game where players collude for the prize">
  <link href="https://fonts.googleapis.com/css?family=Orbitron:400,500,700,900&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="favicon.png">
  <style>@-webkit-keyframes run-meter{0%,to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}}@keyframes run-meter{0%,to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}50%{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,tbody,tfoot,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}table,td,th{font:inherit;vertical-align:baseline}table,th{padding:0}td,th{margin:0}body{background-color:#e1e1e1;font-family:Orbitron,verdana,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}button{background-color:#222;border:1px solid gold;border-radius:4px;box-shadow:inset 0 39px 0 -24px #333;color:#fff;cursor:pointer;font-family:Orbitron;padding:8px 15px;text-shadow:1px 1px 0 #000;width:200px}input{background-color:rgba(0,0,0,.4);border:1px solid #ccc;box-sizing:border-box;color:gold;font-size:16px;font-weight:100;padding:10px;margin-bottom:10px;text-align:center;width:100%}input:invalid{border-color:red}.row div,textarea{box-sizing:border-box}table,textarea{background-color:rgba(0,0,0,.4)}textarea{color:gold;font-family:poppins;font-size:16px;margin-bottom:4px;padding:10px;border:1px solid #ccc;height:100px;line-height:21px}a,table{color:#fff}table{border-collapse:collapse;margin:50px 0 0}table,td,th{border:1px solid #444}td{padding:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:0}a{text-decoration:underline}.event-feed{width:300px;position:absolute;padding:10px}.event-feed .event{color:#999;padding-bottom:10px}.logo-eth-newyork,.logo-skale{position:absolute;bottom:20px;right:20px}.logo-skale{bottom:90px;width:100px}.game-wrapper{background:rgba(0,0,0,.3);border-bottom:10px solid #000;width:800px;margin:0 auto;box-sizing:border-box;min-height:100vh;padding:30px 10px;position:relative}.hidden,[data-group]{display:none}.treasure{background-image:url(static/images/chest.svg);width:100%;height:200px;background-size:200px;background-position:center;background-repeat:no-repeat}.game-name{text-align:center;font-size:50px;color:#333;font-weight:700}.game-description{color:#fff;padding:30px;text-align:justify;font-size:18px;line-height:30px}.gameboard{height:400px;margin-bottom:50px;position:relative}.grid{width:100px;position:absolute;margin-left:auto;margin-right:auto;left:0;right:0}.grid-0{bottom:0}.grid-1,.grid-2{bottom:180px;transform:rotate(120deg);left:-210px}.grid-2{transform:rotate(240deg);left:210px}.grid-0 [data-position="1,0"]{background-color:#f93}.grid-1 [data-position="1,0"]{background-color:#333}.grid-2 [data-position="1,1"]{background-color:#fff}.reward{height:25px;width:25px;background-color:#000;border-radius:50%;display:inline-block;position:absolute;top:177px;left:377px}.row{display:flex;justify-content:space-between;padding-bottom:5px}.row div{background:rgba(0,0,0,.2);box-shadow:0 0 0 1px #777;display:inline-block;border:1px solid #fff;width:30px;height:30px;text-align:center;line-height:30px}.row div[data-position]{cursor:pointer}.row div[data-position]:hover{border:1px solid #f93}.action-selection div{padding-left:10px;padding-bottom:5px}.action-selection button.active{opacity:1}.action-selection button{opacity:.5}.glow{color:#e1e1e1}.action-item{border-bottom:1px dashed #555;clear:both;margin-top:30px;padding-bottom:30px}.dig-selection .slider-wrapper{display:inline-block;width:20px;height:150px;padding:0}.dig-selection .slider-wrapper input{background:0 0;width:150px;height:20px;margin:0;transform-origin:75px 75px;transform:rotate(-90deg)}.shovel-wrapper{border-bottom:1px dashed gold;display:inline-block;width:100%;text-align:center}.shovel-wrapper button.dig{background-color:#000;border:1px solid gold;box-shadow:none;color:#fff;cursor:pointer;font-size:16px;height:100px;margin-top:20px;padding:12px 16px;position:relative;text-align:left;background:-webkit-gradient(linear,left top,left bottom,from(#222),to(#000));background:-moz-linear-gradient(top,#222,#000);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#222222', endColorstr='#000000')}.shovel-wrapper button.dig .cta-wrapper{position:absolute;top:25%;right:10%;text-align:center;line-height:25px;font-size:18px;font-weight:100}.shovel-wrapper .shovel{background-image:url(static/images/shovel.svg);background-repeat:no-repeat;background-position:10% center;background-size:50px;position:absolute;top:25px;left:25px;width:50px;height:50px}.shovel-wrapper button.dig .cta{font-weight:900;font-size:16px}.shovel-wrapper .left{float:left}.shovel-wrapper .right{float:right}.shovel-wrapper .min-max button{padding:6px;width:49%}.prize-chart{color:#fff}.prize-chart h2{font-weight:700}.prize-chart h3{padding-top:20px;font-size:14px}.prize-chart .prizes{color:gold;font-weight:700}.prize-chart .prizes div{padding-bottom:4px}.button-wrapper,.prize-chart{text-align:center}.button-wrapper button,.vanity-name button{font-size:14px;font-weight:900}.vanity-name button{padding:8px}button .price{font-size:13px;font-weight:100}button .caption{font-size:11px;font-weight:100;padding-top:4px}.image-preview img,table,textarea{width:100%}.ground{border-bottom:1px solid #ffc}.event-feed .emoji{height:1rem;margin:0 .05em 0 .1em;min-height:22px;min-width:22px;object-fit:contain;vertical-align:-.4em;width:1rem;padding-right:4px}.event-feed .event-link{color:#ccc;text-decoration:none}.event-feed .event[data-event=OnVanity]{border:2px solid #fff}.event-feed .event[data-event=OnPost]{border:2px solid #0a6894}.event-feed .event[data-event=OnPost] .message{color:#fff;font-weight:400}.event-feed .event[data-event=OnDig]{border:1px dotted gold}.event-feed .event[data-event=OnDig] .multiplier{color:gold;font-weight:700}.event-feed .event[data-event=OnDig] .discovered{font-weight:700}.event-feed .event .playerAddress,.info-box table td.address{font-size:12px}.event-feed .event .timestamp{font-size:12px;color:#777;text-align:right}.event-feed .event .playerName{color:#fff}.investor-box table tr:first-of-type{font-weight:700;text-align:center}.investor-box table td{overflow:scroll;text-overflow:unset}.small-buttons button{margin:10px 0}.treasure-finder svg{height:60px;margin:auto;text-align:center;width:60px}.treasure-finder.active svg{-webkit-transform:rotate(80deg);transform:rotate(80deg)}.treasure-finder.active svg .meter-r{-webkit-animation-name:run-meter;animation-name:run-meter;-webkit-animation-duration:2s;animation-duration:2s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-transform-origin:50% 50%;transform-origin:50% 50%}</style>
  <script src="//cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.36/dist/web3.min.js"></script>
</head>

<body>
  <div class="event-feed">
  <div class="event">hello event feed</div>
</div>

<div class="game-wrapper">
  <h1 class="game-name">prototype</h1>
  <img class="logo-eth-newyork" src="./static/images/ETHNewYork-logo.svg">
  <img class="logo-skale" src="./static/images/skale.png">
<!--   <div class="game-description">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</div> -->
  <div class="gameboard">
      <div class="grid grid-0">
        <div class="row">
          <div data-position="0,4"></div>
          <div data-position="1,4"></div>
          <div data-position="2,4"></div>
        </div>
        <div class="row">
          <div data-position="0,3"></div>
          <div data-position="1,3"></div>
          <div data-position="2,3"></div>
        </div>
        <div class="row">
          <div data-position="0,2"></div>
          <div data-position="1,2"></div>
          <div data-position="2,2"></div>
        </div>
        <div class="row">
          <div data-position="0,1"></div>
          <div data-position="1,1"></div>
          <div data-position="2,1"></div>
        </div>
        <div class="row">
          <div data-position="0,0"></div>
          <div data-position="1,0"></div>
          <div data-position="2,0"></div>
        </div>
      </div>

      <div class="grid grid-1">
        <div class="row">
          <div data-position="0,4"></div>
          <div data-position="1,4"></div>
          <div data-position="2,4"></div>
        </div>
        <div class="row">
          <div data-position="0,3"></div>
          <div data-position="1,3"></div>
          <div data-position="2,3"></div>
        </div>
        <div class="row">
          <div data-position="0,2"></div>
          <div data-position="1,2"></div>
          <div data-position="2,2"></div>
        </div>
        <div class="row">
          <div data-position="0,1"></div>
          <div data-position="1,1"></div>
          <div data-position="2,1"></div>
        </div>
        <div class="row">
          <div data-position="0,0"></div>
          <div data-position="1,0"></div>
          <div data-position="2,0"></div>
        </div>
      </div>

      <div class="grid grid-2">
        <div class="row">
          <div data-position="0,4"></div>
          <div data-position="1,4"></div>
          <div data-position="2,4"></div>
        </div>
        <div class="row">
          <div data-position="0,3"></div>
          <div data-position="1,3"></div>
          <div data-position="2,3"></div>
        </div>
        <div class="row">
          <div data-position="0,2"></div>
          <div data-position="1,2"></div>
          <div data-position="2,2"></div>
        </div>
        <div class="row">
          <div data-position="0,1"></div>
          <div data-position="1,1"></div>
          <div data-position="2,1"></div>
        </div>
        <div class="row">
          <div data-position="0,0"></div>
          <div data-position="1,0"></div>
          <div data-position="2,0"></div>
        </div>
      </div>

      <div class="reward"></div>
    </div>

    <div class="action-selection" style="display:none;">
      <div>
        <button data-action="move" class="active">Move</button>
      </div>
      <div>
        <button data-action="place">Place</button>
      </div>
      <div>
        <button data-action="reveal">Reveal</button>
      </div>
    </div>

    <div class="button-wrapper">
      <button data-action="start">Start Game</button>
    </div>
  </div>
</div>

  <script>!function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}t(function(A){!function(t){var u,e=Object.prototype,s=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag",a=t.regeneratorRuntime;if(a)A.exports=a;else{(a=t.regeneratorRuntime=A.exports).wrap=m;var f="suspendedStart",p="suspendedYield",d="executing",y="completed",h={},c={};c[o]=function(){return this};var l=Object.getPrototypeOf,g=l&&l(l(j([])));g&&g!==e&&s.call(g,o)&&(c=g);var v=S.prototype=w.prototype=Object.create(c);x.prototype=v.constructor=S,S.constructor=x,S[i]=x.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,i in t||(t[i]="GeneratorFunction")),t.prototype=Object.create(v),t},a.awrap=function(t){return{__await:t}},E(O.prototype),O.prototype[r]=function(){return this},a.AsyncIterator=O,a.async=function(t,e,n,r){var o=new O(m(t,e,n,r));return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},E(v),v[i]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=j,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=u)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=u),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=s.call(o,"catchLoc"),c=s.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=u),h}}}function m(t,e,n,r){var i,a,c,u,o=e&&e.prototype instanceof w?e:w,s=Object.create(o.prototype),l=new P(r||[]);return s._invoke=(i=t,a=n,c=l,u=f,function(t,e){if(u===d)throw new Error("Generator is already running");if(u===y){if("throw"===t)throw e;return T()}for(c.method=t,c.arg=e;;){var n=c.delegate;if(n){var r=L(n,c);if(r){if(r===h)continue;return r}}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(u===f)throw u=y,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);u=d;var o=b(i,a,c);if("normal"===o.type){if(u=c.done?y:p,o.arg===h)continue;return{value:o.arg,done:c.done}}"throw"===o.type&&(u=y,c.method="throw",c.arg=o.arg)}}),s}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function w(){}function x(){}function S(){}function E(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function O(u){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,o){var i=b(u[t],u,n);if("throw"!==i.type){var a=i.arg,c=a.value;return c&&"object"==typeof c&&s.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):Promise.resolve(c).then(function(t){a.value=t,r(a)},o)}o(i.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function L(t,e){var n=t.iterator[e.method];if(n===u){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=u,L(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=b(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=u),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function j(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(s.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=u,t.done=!0,t};return r.next=r}}return{next:T}}function T(){return{value:u,done:!0}}}(function(){return this}()||Function("return this")())});function u(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function e(c){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function o(t){u(r,e,n,o,i,"next",t)}function i(t){u(r,e,n,o,i,"throw",t)}o(void 0)})}}function n(){return r.apply(this,arguments)}function r(){return(r=e(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.ethereum?(console.log("window.ethereum"),window.web3=new Web3(window.ethereum)):window.web3?(console.log("window.web3"),window.web3=new Web3(Web3.givenProvider)):(console.log("INSTALL METAMASK"),window.web3=new Web3),!window.web3.currentProvider||!window.web3.currentProvider.isConnected()){t.next=7;break}return console.log("successfully connected"),t.next=5,window.web3.eth.net.getNetworkType(function(t,e){game.network=t?"":e});case 5:t.next=9;break;case 7:console.log("provider not connected"),game.network="";case 9:console.log("game network:",game.network),window.BN=window.web3.utils.BN;case 11:case"end":return t.stop()}},t)}))).apply(this,arguments)}var o={interface:[{constant:!0,inputs:[],name:"MAX_PLAYERS",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x4411b3eb"},{constant:!0,inputs:[],name:"getTotalPlayers",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x4529cae7"},{constant:!1,inputs:[{name:"position",type:"uint256[2]"}],name:"move",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0x47cd150d"},{constant:!0,inputs:[],name:"currentGameId",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function",signature:"0x536a3ddc"},{constant:!0,inputs:[],name:"getPlayers",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function",signature:"0x8b5b9ccc"},{constant:!1,inputs:[],name:"start",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xbe9a6555"},{constant:!1,inputs:[{name:"player",type:"uint256"}],name:"reveal",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xc2ca0ac5"},{constant:!1,inputs:[{name:"player",type:"uint256"},{name:"column",type:"uint256[2]"}],name:"place",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function",signature:"0xf28bb934"},{anonymous:!1,inputs:[{indexed:!0,name:"_gameId",type:"uint256"},{indexed:!1,name:"_playerAddress",type:"address"}],name:"OnJoin",type:"event",signature:"0x97dc0664567158a9c170d5b082e7ae2a58fae10c3e07f2cfb6fb86fe6dcfb88a"},{anonymous:!1,inputs:[{indexed:!0,name:"_gameId",type:"uint256"},{indexed:!1,name:"_playerAddress",type:"address"},{indexed:!1,name:"_position",type:"uint256[2]"}],name:"OnMove",type:"event",signature:"0x174f14afba076c794752d4ab5ede95f4aa352e40367d7d321477d7fd532761fa"},{anonymous:!1,inputs:[{indexed:!0,name:"_gameId",type:"uint256"},{indexed:!1,name:"_playerAddress",type:"address"},{indexed:!1,name:"_player",type:"uint256"},{indexed:!1,name:"_position",type:"uint256[2]"}],name:"OnPlace",type:"event",signature:"0x7027c1bb3b8482b2aefc9449e0cc4a30b7c180dd7d3b5f8baad4d9686d8302a2"},{anonymous:!1,inputs:[{indexed:!0,name:"_gameId",type:"uint256"},{indexed:!1,name:"_playerAddress",type:"address"},{indexed:!1,name:"_player",type:"uint256"}],name:"OnReveal",type:"event",signature:"0xd8fe51dcf4f6d2f9edd88781a2eda7da81209867825e1ae938f73106a61c4b9f"}],address:"0xe44f47486046E39A3Dfbdb8764D17009aa65a885"};function i(){return a.apply(this,arguments)}function a(){return(a=e(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("setting up the game state"),game.address=o.address,game.contract=new web3.eth.Contract(o.interface,game.address),t.next=5,c();case 5:return game.currentGameId=t.sent,t.next=8,l();case 8:return game.pastEvents=t.sent,t.next=11,web3.eth.getCoinbase();case 11:game.playerAddress=t.sent,game.players=[],game.positions=[],game.action="move",console.log("past events:",game.pastEvents);case 16:case"end":return t.stop()}},t)}))).apply(this,arguments)}function c(){return s.apply(this,arguments)}function s(){return(s=e(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,game.contract.methods.currentGameId().call();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))).apply(this,arguments)}function l(){return f.apply(this,arguments)}function f(){return(f=e(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,game.contract.methods.getTotalPlayers().call();case 2:if(e=t.sent,console.log("total players:",e),console.log("current round id:",game.currentGameId),!(3<e)){t.next=7;break}return t.abrupt("return",[]);case 7:return t.next=9,game.contract.getPastEvents("allEvents",{fromBlock:0,toBlock:"latest",filter:{_gameId:game.currentGameId}});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}},t)}))).apply(this,arguments)}var p,d,y,h=function(t){return"object"==typeof t?null!==t:"function"==typeof t},g={}.toString,v=function(t){return g.call(t).slice(8,-1)},m=t(function(t){var e=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=e)}),b=(m.version,t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),w=t(function(t){var e="__core-js_shared__",n=b[e]||(b[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:m.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),x=0,S=Math.random(),E=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++x+S).toString(36))},O=t(function(t){var e=w("wks"),n=b.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:E)("Symbol."+t))}).store=e}),L=O("match"),_=function(t){if(!h(t))throw TypeError(t+" is not an object!");return t},k=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},P=O("species"),j=Math.ceil,T=Math.floor,A=function(t){return isNaN(t=+t)?0:(0<t?T:j)(t)},R=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},M=(p=!0,function(t,e){var n,r,o=String(R(t)),i=A(e),a=o.length;return i<0||a<=i?p?"":void 0:(n=o.charCodeAt(i))<55296||56319<n||i+1===a||(r=o.charCodeAt(i+1))<56320||57343<r?p?o.charAt(i):n:p?o.slice(i,i+2):r-56320+(n-55296<<10)+65536}),I=Math.min,N=function(t){return 0<t?I(A(t),9007199254740991):0},F=O("toStringTag"),C="Arguments"==v(function(){return arguments}()),G=RegExp.prototype.exec,q=function(t,e){var n,r,o,i,a=t.exec;if("function"==typeof a){var c=a.call(t,e);if("object"!=typeof c)throw new TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==(void 0===(n=t)?"Undefined":null===n?"Null":"string"==typeof(o=function(t,e){try{return t[e]}catch(t){}}(r=Object(n),F))?o:C?v(r):"Object"==(i=v(r))&&"function"==typeof r.callee?"Arguments":i))throw new TypeError("RegExp#exec called on incompatible receiver");return G.call(t,e)},D=function(){var t=_(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},B=RegExp.prototype.exec,H=String.prototype.replace,W=B,V="lastIndex",J=(d=/a/,y=/b*/g,B.call(d,"a"),B.call(y,"a"),0!==d[V]||0!==y[V]),K=void 0!==/()??/.exec("")[1];(J||K)&&(W=function(t){var e,n,r,o,i=this;return K&&(n=new RegExp("^"+i.source+"$(?!\\s)",D.call(i))),J&&(e=i[V]),r=B.call(i,t),J&&r&&(i[V]=i.global?r.index+r[0].length:e),K&&r&&1<r.length&&H.call(r[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)}),r});var Y=W,z=function(t){try{return!!t()}catch(t){return!0}},U=!z(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),$=b.document,Q=h($)&&h($.createElement),X=function(t){return Q?$.createElement(t):{}},Z=!U&&!z(function(){return 7!=Object.defineProperty(X("div"),"a",{get:function(){return 7}}).a}),tt=function(t,e){if(!h(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!h(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!h(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},et=Object.defineProperty,nt={f:U?Object.defineProperty:function(t,e,n){if(_(t),e=tt(e,!0),_(n),Z)try{return et(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},rt=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ot=U?function(t,e,n){return nt.f(t,e,rt(1,n))}:function(t,e,n){return t[e]=n,t},it={}.hasOwnProperty,at=function(t,e){return it.call(t,e)},ct=w("native-function-to-string",Function.toString),ut=t(function(t){var i=E("src"),e="toString",a=(""+ct).split(e);m.inspectSource=function(t){return ct.call(t)},(t.exports=function(t,e,n,r){var o="function"==typeof n;o&&(at(n,"name")||ot(n,"name",e)),t[e]!==n&&(o&&(at(n,i)||ot(n,i,t[e]?""+t[e]:a.join(String(e)))),t===b?t[e]=n:r?t[e]?t[e]=n:ot(t,e,n):(delete t[e],ot(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[i]||ct.call(this)})}),st=function(r,o,t){if(k(r),void 0===o)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}},lt="prototype",ft=function(t,e,n){var r,o,i,a,c=t&ft.F,u=t&ft.G,s=t&ft.S,l=t&ft.P,f=t&ft.B,p=u?b:s?b[e]||(b[e]={}):(b[e]||{})[lt],d=u?m:m[e]||(m[e]={}),y=d[lt]||(d[lt]={});for(r in u&&(n=e),n)i=((o=!c&&p&&void 0!==p[r])?p:n)[r],a=f&&o?st(i,b):l&&"function"==typeof i?st(Function.call,i):i,p&&ut(p,r,i,t&ft.U),d[r]!=i&&ot(d,r,a),l&&y[r]!=i&&(y[r]=i)};b.core=m,ft.F=1,ft.G=2,ft.S=4,ft.P=8,ft.B=16,ft.W=32,ft.U=64,ft.R=128;var pt=ft;pt({target:"RegExp",proto:!0,forced:Y!==/./.exec},{exec:Y});var dt=O("species"),yt=!z(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),ht=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),gt=Math.min,vt=[].push,mt="split",bt="length",wt="lastIndex",xt=4294967295,St=!z(function(){});!function(n,t,e){var r=O(n),i=!z(function(){var t={};return t[r]=function(){return 7},7!=""[n](t)}),o=i?!z(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===n&&(e.constructor={},e.constructor[dt]=function(){return e}),e[r](""),!t}):void 0;if(!i||!o||"replace"===n&&!yt||"split"===n&&!ht){var a=/./[r],c=e(R,r,""[n],function(t,e,n,r,o){return e.exec===Y?i&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),u=c[0],s=c[1];ut(String.prototype,n,u),ot(RegExp.prototype,r,2==t?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)})}}("split",2,function(o,i,x,S){var E;return E="c"=="abbc"[mt](/(b)*/)[1]||4!="test"[mt](/(?:)/,-1)[bt]||2!="ab"[mt](/(?:ab)*/)[bt]||4!="."[mt](/(.?)(.?)/)[bt]||1<"."[mt](/()()/)[bt]||""[mt](/.?/)[bt]?function(t,e){var n,r,o=String(this);if(void 0===t&&0===e)return[];if(!h(n=t)||(void 0!==(r=n[L])?!r:"RegExp"!=v(n)))return x.call(o,t,e);for(var i,a,c,u=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=void 0===e?xt:e>>>0,p=new RegExp(t.source,s+"g");(i=Y.call(p,o))&&!(l<(a=p[wt])&&(u.push(o.slice(l,i.index)),1<i[bt]&&i.index<o[bt]&&vt.apply(u,i.slice(1)),c=i[0][bt],l=a,u[bt]>=f));)p[wt]===i.index&&p[wt]++;return l===o[bt]?!c&&p.test("")||u.push(""):u.push(o.slice(l)),u[bt]>f?u.slice(0,f):u}:"0"[mt](void 0,0)[bt]?function(t,e){return void 0===t&&0===e?[]:x.call(this,t,e)}:x,[function(t,e){var n=o(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,n,e):E.call(String(n),t,e)},function(t,e){var n=S(E,t,this,e,E!==x);if(n.done)return n.value;var r,o,i,a=_(t),c=String(this),u=(r=RegExp,void 0===(i=_(a).constructor)||null==(o=_(i)[P])?r:k(o)),s=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(St?"y":"g"),f=new u(St?a:"^(?:"+a.source+")",l),p=void 0===e?xt:e>>>0;if(0===p)return[];if(0===c.length)return null===q(f,c)?[c]:[];for(var d,y,h=0,g=0,v=[];g<c.length;){f.lastIndex=St?g:0;var m,b=q(f,St?c:c.slice(g));if(null===b||(m=gt(N(f.lastIndex+(St?0:g)),c.length))===h)d=c,g=(y=g)+(s?M(d,y).length:1);else{if(v.push(c.slice(h,g)),v.length===p)return v;for(var w=1;w<=b.length-1;w++)if(v.push(b[w]),v.length===p)return v;g=h=m}}return v.push(c.slice(h)),v}]}),U&&"g"!=/./g.flags&&nt.f(RegExp.prototype,"flags",{configurable:!0,get:D});var Et="toString",Ot=/./[Et],Lt=function(t){ut(RegExp.prototype,Et,t,!0)};z(function(){return"/a/b"!=Ot.call({source:"a",flags:"b"})})?Lt(function(){var t=_(this);return"/".concat(t.source,"/","flags"in t?t.flags:!U&&t instanceof RegExp?D.call(t):void 0)}):Ot.name!=Et&&Lt(function(){return Ot.call(this)});var _t={f:O},kt=nt.f,Pt=function(t){var e=m.Symbol||(m.Symbol=b.Symbol||{});"_"==t.charAt(0)||t in e||kt(e,t,{value:_t.f(t)})};Pt("asyncIterator");var jt,Tt=t(function(t){var n=E("meta"),e=nt.f,r=0,o=Object.isExtensible||function(){return!0},i=!z(function(){return o(Object.preventExtensions({}))}),a=function(t){e(t,n,{value:{i:"O"+ ++r,w:{}}})},c=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!h(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!at(t,n)){if(!o(t))return"F";if(!e)return"E";a(t)}return t[n].i},getWeak:function(t,e){if(!at(t,n)){if(!o(t))return!0;if(!e)return!1;a(t)}return t[n].w},onFreeze:function(t){return i&&c.NEED&&o(t)&&!at(t,n)&&a(t),t}}}),At=(Tt.KEY,Tt.NEED,Tt.fastKey,Tt.getWeak,Tt.onFreeze,nt.f),Rt=O("toStringTag"),Mt=function(t,e,n){t&&!at(t=n?t:t.prototype,Rt)&&At(t,Rt,{configurable:!0,value:e})},It=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==v(t)?t.split(""):Object(t)},Nt=function(t){return It(R(t))},Ft=Math.max,Ct=Math.min,Gt=w("keys"),qt=function(t){return Gt[t]||(Gt[t]=E(t))},Dt=(jt=!1,function(t,e,n){var r,o,i,a=Nt(t),c=N(a.length),u=(o=c,(r=A(r=n))<0?Ft(r+o,0):Ct(r,o));if(jt&&e!=e){for(;u<c;)if((i=a[u++])!=i)return!0}else for(;u<c;u++)if((jt||u in a)&&a[u]===e)return jt||u||0;return!jt&&-1}),Bt=qt("IE_PROTO"),Ht=function(t,e){var n,r=Nt(t),o=0,i=[];for(n in r)n!=Bt&&at(r,n)&&i.push(n);for(;e.length>o;)at(r,n=e[o++])&&(~Dt(i,n)||i.push(n));return i},Wt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Vt=Object.keys||function(t){return Ht(t,Wt)},Jt={f:Object.getOwnPropertySymbols},Kt={f:{}.propertyIsEnumerable},Yt=Array.isArray||function(t){return"Array"==v(t)},zt=U?Object.defineProperties:function(t,e){_(t);for(var n,r=Vt(e),o=r.length,i=0;i<o;)nt.f(t,n=r[i++],e[n]);return t},Ut=b.document,$t=Ut&&Ut.documentElement,Qt=qt("IE_PROTO"),Xt=function(){},Zt="prototype",te=function(){var t,e=X("iframe"),n=Wt.length;for(e.style.display="none",$t.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),te=t.F;n--;)delete te[Zt][Wt[n]];return te()},ee=Object.create||function(t,e){var n;return null!==t?(Xt[Zt]=_(t),n=new Xt,Xt[Zt]=null,n[Qt]=t):n=te(),void 0===e?n:zt(n,e)},ne=Wt.concat("length","prototype"),re={f:Object.getOwnPropertyNames||function(t){return Ht(t,ne)}},oe=re.f,ie={}.toString,ae="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ce={f:function(t){return ae&&"[object Window]"==ie.call(t)?function(t){try{return oe(t)}catch(t){return ae.slice()}}(t):oe(Nt(t))}},ue=Object.getOwnPropertyDescriptor,se={f:U?ue:function(t,e){if(t=Nt(t),e=tt(e,!0),Z)try{return ue(t,e)}catch(t){}if(at(t,e))return rt(!Kt.f.call(t,e),t[e])}},le=Tt.KEY,fe=se.f,pe=nt.f,de=ce.f,ye=b.Symbol,he=b.JSON,ge=he&&he.stringify,ve="prototype",me=O("_hidden"),be=O("toPrimitive"),we={}.propertyIsEnumerable,xe=w("symbol-registry"),Se=w("symbols"),Ee=w("op-symbols"),Oe=Object[ve],Le="function"==typeof ye,_e=b.QObject,ke=!_e||!_e[ve]||!_e[ve].findChild,Pe=U&&z(function(){return 7!=ee(pe({},"a",{get:function(){return pe(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=fe(Oe,e);r&&delete Oe[e],pe(t,e,n),r&&t!==Oe&&pe(Oe,e,r)}:pe,je=function(t){var e=Se[t]=ee(ye[ve]);return e._k=t,e},Te=Le&&"symbol"==typeof ye.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof ye},Ae=function(t,e,n){return t===Oe&&Ae(Ee,e,n),_(t),e=tt(e,!0),_(n),at(Se,e)?(n.enumerable?(at(t,me)&&t[me][e]&&(t[me][e]=!1),n=ee(n,{enumerable:rt(0,!1)})):(at(t,me)||pe(t,me,rt(1,{})),t[me][e]=!0),Pe(t,e,n)):pe(t,e,n)},Re=function(t,e){_(t);for(var n,r=function(t){var e=Vt(t),n=Jt.f;if(n)for(var r,o=n(t),i=Kt.f,a=0;o.length>a;)i.call(t,r=o[a++])&&e.push(r);return e}(e=Nt(e)),o=0,i=r.length;o<i;)Ae(t,n=r[o++],e[n]);return t},Me=function(t){var e=we.call(this,t=tt(t,!0));return!(this===Oe&&at(Se,t)&&!at(Ee,t))&&(!(e||!at(this,t)||!at(Se,t)||at(this,me)&&this[me][t])||e)},Ie=function(t,e){if(t=Nt(t),e=tt(e,!0),t!==Oe||!at(Se,e)||at(Ee,e)){var n=fe(t,e);return!n||!at(Se,e)||at(t,me)&&t[me][e]||(n.enumerable=!0),n}},Ne=function(t){for(var e,n=de(Nt(t)),r=[],o=0;n.length>o;)at(Se,e=n[o++])||e==me||e==le||r.push(e);return r},Fe=function(t){for(var e,n=t===Oe,r=de(n?Ee:Nt(t)),o=[],i=0;r.length>i;)!at(Se,e=r[i++])||n&&!at(Oe,e)||o.push(Se[e]);return o};Le||(ut((ye=function(){if(this instanceof ye)throw TypeError("Symbol is not a constructor!");var e=E(0<arguments.length?arguments[0]:void 0),n=function(t){this===Oe&&n.call(Ee,t),at(this,me)&&at(this[me],e)&&(this[me][e]=!1),Pe(this,e,rt(1,t))};return U&&ke&&Pe(Oe,e,{configurable:!0,set:n}),je(e)})[ve],"toString",function(){return this._k}),se.f=Ie,nt.f=Ae,re.f=ce.f=Ne,Kt.f=Me,Jt.f=Fe,U&&ut(Oe,"propertyIsEnumerable",Me,!0),_t.f=function(t){return je(O(t))}),pt(pt.G+pt.W+pt.F*!Le,{Symbol:ye});for(var Ce="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ge=0;Ce.length>Ge;)O(Ce[Ge++]);for(var qe=Vt(O.store),De=0;qe.length>De;)Pt(qe[De++]);pt(pt.S+pt.F*!Le,"Symbol",{for:function(t){return at(xe,t+="")?xe[t]:xe[t]=ye(t)},keyFor:function(t){if(!Te(t))throw TypeError(t+" is not a symbol!");for(var e in xe)if(xe[e]===t)return e},useSetter:function(){ke=!0},useSimple:function(){ke=!1}}),pt(pt.S+pt.F*!Le,"Object",{create:function(t,e){return void 0===e?ee(t):Re(ee(t),e)},defineProperty:Ae,defineProperties:Re,getOwnPropertyDescriptor:Ie,getOwnPropertyNames:Ne,getOwnPropertySymbols:Fe}),he&&pt(pt.S+pt.F*(!Le||z(function(){var t=ye();return"[null]"!=ge([t])||"{}"!=ge({a:t})||"{}"!=ge(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(h(e)||void 0!==t)&&!Te(t))return Yt(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Te(e))return e}),r[1]=e,ge.apply(he,r)}}),ye[ve][be]||ot(ye[ve],be,ye[ve].valueOf),Mt(ye,"Symbol"),Mt(Math,"Math",!0),Mt(b.JSON,"JSON",!0);var Be=O("unscopables"),He=Array.prototype;null==He[Be]&&ot(He,Be,{});var We=function(t){He[Be][t]=!0},Ve=function(t,e){return{value:e,done:!!t}},Je={},Ke={};ot(Ke,O("iterator"),function(){return this});var Ye=qt("IE_PROTO"),ze=Object.prototype,Ue=Object.getPrototypeOf||function(t){return t=Object(R(t)),at(t,Ye)?t[Ye]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ze:null},$e=O("iterator"),Qe=!([].keys&&"next"in[].keys()),Xe="values",Ze=function(){return this},tn=function(t,e,n,r,o,i,a){var c,u,s;u=e,s=r,(c=n).prototype=ee(Ke,{next:rt(1,s)}),Mt(c,u+" Iterator");var l,f,p,d=function(t){if(!Qe&&t in v)return v[t];switch(t){case"keys":case Xe:return function(){return new n(this,t)}}return function(){return new n(this,t)}},y=e+" Iterator",h=o==Xe,g=!1,v=t.prototype,m=v[$e]||v["@@iterator"]||o&&v[o],b=m||d(o),w=o?h?d("entries"):b:void 0,x="Array"==e&&v.entries||m;if(x&&(p=Ue(x.call(new t)))!==Object.prototype&&p.next&&(Mt(p,y,!0),"function"!=typeof p[$e]&&ot(p,$e,Ze)),h&&m&&m.name!==Xe&&(g=!0,b=function(){return m.call(this)}),(Qe||g||!v[$e])&&ot(v,$e,b),Je[e]=b,Je[y]=Ze,o)if(l={values:h?b:d(Xe),keys:i?b:d("keys"),entries:w},a)for(f in l)f in v||ut(v,f,l[f]);else pt(pt.P+pt.F*(Qe||g),e,l);return l}(Array,"Array",function(t,e){this._t=Nt(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Ve(1)):Ve(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Je.Arguments=Je.Array,We("keys"),We("values"),We("entries");for(var en=O("iterator"),nn=O("toStringTag"),rn=Je.Array,on={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},an=Vt(on),cn=0;cn<an.length;cn++){var un,sn=an[cn],ln=on[sn],fn=b[sn],pn=fn&&fn.prototype;if(pn&&(pn[en]||ot(pn,en,rn),pn[nn]||ot(pn,nn,sn),Je[sn]=rn,ln))for(un in tn)pn[un]||ut(pn,un,tn[un],!0)}function dn(){var t;t=game.pastEvents.map(function(t){var e=t.event,n=(t.transactionHash,t.returnValues);if(n._gameId===game.currentGameId)return'<div class="event" data-event="'+e+'">\n\t\t\t'+On(t)+"\n\t\t</div>"}).reverse(),document.querySelector(".event-feed").innerHTML+=t.join(""),function(){document.querySelector('button[data-action="start"]').addEventListener("click",yn);for(var t=document.querySelectorAll(".row div[data-position]"),e=Array.isArray(t),n=0,t=e?t:t[Symbol.iterator]();;){var r;if(e){if(n>=t.length)break;r=t[n++]}else{if((n=t.next()).done)break;r=n.value}var o=r;o.addEventListener("click",function(t){gn(t)})}document.querySelector('.action-selection [data-action="move"]').addEventListener("click",wn),document.querySelector('.action-selection [data-action="place"]').addEventListener("click",xn),document.querySelector('.action-selection [data-action="reveal"]').addEventListener("click",Sn)}(),game.contract.events.allEvents(function(t,e){!function(t){console.log("displayEvent:",t);var e='<div class="event" data-event="'+t.event+'">\n\t\t'+On(t)+"\n\t</div>";console.log("markup:",e),document.querySelector(".event-feed").innerHTML=e+document.querySelector(".event-feed").innerHTML}(e)})}function yn(){return hn.apply(this,arguments)}function hn(){return(hn=e(regeneratorRuntime.mark(function t(){var e,n,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,web3.eth.getCoinbase();case 2:e=t.sent,n=game.address,r=game.contract.methods.start().encodeABI(),o=new BN("0"),web3.eth.sendTransaction({from:e,to:n,value:o,data:r}).on("transactionHash",function(t){}).on("receipt",function(t){}).on("confirmation",function(t,e){}).on("error",console.error),document.querySelector('button[data-action="start"]').style.display="none";case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function gn(t){return vn.apply(this,arguments)}function vn(){return(vn=e(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("take action adsf:",e.target),n=e.target.dataset.position,console.log("coord",n),console.log("game action",game.action),"move"!==game.action){t.next=7;break}return t.next=7,mn(n);case 7:game.action,game.action;case 9:case"end":return t.stop()}},t)}))).apply(this,arguments)}function mn(t){return bn.apply(this,arguments)}function bn(){return(bn=e(regeneratorRuntime.mark(function t(e){var n,r,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("sendMove",e),t.next=3,web3.eth.getCoinbase();case 3:n=t.sent,r=game.address,o=game.contract.methods.move(e.split(",")).encodeABI(),i=new BN("0"),web3.eth.sendTransaction({from:n,to:r,value:i,data:o});case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function wn(t){En(t.target)}function xn(t){En(t.target)}function Sn(t){En(t.target)}function En(t){var e=document.querySelectorAll(".action-selection button");[].forEach.call(e,function(t){t.classList.remove("active")}),t.classList.add("active"),game.action=t.dataset.action}function On(t){var e,n,r=t.event,o=(t.transactionHash,t.returnValues);if(console.log("create card:",r),"OnJoin"===r)return function(){var t=o._playerAddress;o._gameId;game.players.push(Ln(t)),-1<game.players.indexOf(Ln(game.playerAddress))&&(document.querySelector('button[data-action="start"]').style.display="none",document.querySelector(".action-selection").style.display="");return"<div>"+t.substring(0,21)+"</div><div>is Ready to Collude</div>"}();if("OnMove"===r)return e=o._playerAddress,n=o._position,console.log("create on move:",e,n),"<div>"+e.substring(0,21)+"</div><div>Moved to "+n+"</div>";if("OnPlace"===r)return createOnPlace()}function Ln(t){return web3.utils.toChecksumAddress(t)}function _n(){return(_n=e(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:return t.next=4,i();case 4:dn();case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}window.game=window.game||{},function(){_n.apply(this,arguments)}()}();</script>
</body>
</html>
